{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jahnaviarumalla/Downloads/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jahnaviarumalla/Downloads/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/jahnaviarumalla/Downloads/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jahnaviarumalla/Downloads/react-app/src/Home.js\";\nimport React, { useState, useEffect } from 'react';\nimport Menu from './Menu';\n\nfunction Home(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      menuItems = _useState2[0],\n      setMenuItems = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      role = _useState4[0],\n      setRole = _useState4[1];\n\n  var makeUniqueid = function makeUniqueid(length) {\n    var result = [];\n    var characters = '0123456789';\n    var charactersLength = characters.length;\n\n    for (var i = 0; i < length; i++) {\n      result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));\n    }\n\n    return result.join('');\n  };\n\n  useEffect(function () {\n    var userDetails = JSON.parse(sessionStorage.getItem('userDetails'));\n\n    if (userDetails) {\n      setRole(userDetails.role);\n    }\n\n    getItems();\n  }, []);\n\n  var getItems = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"https://uin25qovaj.execute-api.us-east-2.amazonaws.com/prod/menu\").then(function (getResp) {\n                return getResp.json();\n              }).then(function (getResp) {\n                setMenuItems(getResp);\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getItems() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var postItem = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(item) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetch(\"https://uin25qovaj.execute-api.us-east-2.amazonaws.com/prod/menu\", {\n                method: 'POST',\n                // *GET, POST, PUT, DELETE, etc.\n                mode: 'no-cors',\n                // no-cors, *cors, same-origin\n                cache: 'no-cache',\n                // *default, no-cache, reload, force-cache, only-if-cached\n                credentials: 'same-origin',\n                // include, *same-origin, omit\n                headers: {\n                  'Content-Type': 'application/json' // 'Content-Type': 'application/x-www-form-urlencoded',\n\n                },\n                redirect: 'follow',\n                // manual, *follow, error\n                referrerPolicy: 'no-referrer',\n                // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n                body: JSON.stringify(item) // body data type must match \"Content-Type\" header\n\n              }).then(function (res) {\n                return res.json();\n              }).then(function (res) {\n                console.log(res);\n                getItems();\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function postItem(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var addItem = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(item) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              item.id = makeUniqueid(6);\n              _context3.next = 3;\n              return postItem(item);\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function addItem(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var editItem = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(item) {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return postItem(item);\n\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function editItem(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var deleteItem = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(item) {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return fetch(\"https://uin25qovaj.execute-api.us-east-2.amazonaws.com/prod/menu/\" + item.id, {\n                method: 'DELETE' // *GET, POST, PUT, DELETE, etc.\n\n              }).then(function (res) {\n                console.log(res);\n                getItems();\n              });\n\n            case 2:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function deleteItem(_x4) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var logout = function logout() {\n    sessionStorage.removeItem('userDetails');\n    props.history.push('/login');\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, menuItems.length ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"welcome-banner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 49\n    }\n  }, \"Welcome to the Cloud Restaurant!\"), \" \", /*#__PURE__*/React.createElement(\"a\", {\n    href: \"javascript:void(0)\",\n    onClick: logout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 91\n    }\n  }, \"Logout\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Menu, {\n    items: menuItems,\n    role: role,\n    addItem: addItem,\n    editItem: editItem,\n    deleteItem: deleteItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  })) : 'Loading...');\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/jahnaviarumalla/Downloads/react-app/src/Home.js"],"names":["React","useState","useEffect","Menu","Home","props","menuItems","setMenuItems","role","setRole","makeUniqueid","length","result","characters","charactersLength","i","push","charAt","Math","floor","random","join","userDetails","JSON","parse","sessionStorage","getItem","getItems","fetch","then","getResp","json","postItem","item","method","mode","cache","credentials","headers","redirect","referrerPolicy","body","stringify","res","console","log","addItem","id","editItem","deleteItem","logout","removeItem","history"],"mappings":"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","sourcesContent":["\nimport React, {useState, useEffect} from 'react';\n\nimport Menu from './Menu';\n \nfunction Home(props) {\n\n    const [menuItems, setMenuItems] = useState([]);\n    const [role, setRole] = useState('');\n\n    const makeUniqueid = (length) => {\n        var result           = [];\n        var characters       = '0123456789';\n        var charactersLength = characters.length;\n        for ( var i = 0; i < length; i++ ) {\n          result.push(characters.charAt(Math.floor(Math.random() * \n     charactersLength)));\n       }\n       return result.join('');\n    }\n\n    useEffect(() => {\n        const userDetails = JSON.parse(sessionStorage.getItem('userDetails'));\n        if(userDetails) {\n            setRole(userDetails.role);\n        }\n        getItems();\n    }, []);\n\n    const getItems = async () => {\n        await fetch(\"https://uin25qovaj.execute-api.us-east-2.amazonaws.com/prod/menu\")\n        .then(getResp => getResp.json())\n        .then(getResp => {\n            setMenuItems(getResp);\n        });\n    }\n\n    const postItem = async (item) => {\n        await fetch(\"https://uin25qovaj.execute-api.us-east-2.amazonaws.com/prod/menu\", {\n            method: 'POST', // *GET, POST, PUT, DELETE, etc.\n            mode: 'no-cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            credentials: 'same-origin', // include, *same-origin, omit\n            headers: {\n              'Content-Type': 'application/json'\n              // 'Content-Type': 'application/x-www-form-urlencoded',\n            },\n            redirect: 'follow', // manual, *follow, error\n            referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n            body: JSON.stringify(item) // body data type must match \"Content-Type\" header\n          })\n        .then(res => res.json())\n        .then(res => {\n            console.log(res);\n            getItems();\n        });\n    }\n\n    const addItem = async (item) => {\n        item.id = makeUniqueid(6);\n        await postItem(item);\n    }\n    const editItem = async (item) => {\n        await postItem(item);\n    }\n    const deleteItem = async (item) => {\n        await fetch(\"https://uin25qovaj.execute-api.us-east-2.amazonaws.com/prod/menu/\" + item.id, {\n            method: 'DELETE', // *GET, POST, PUT, DELETE, etc.\n          })\n        .then(res => {\n            console.log(res);\n            getItems();\n        });\n    }\n\n    const logout = () => {\n        sessionStorage.removeItem('userDetails');\n        props.history.push('/login');\n    }\n\n    return (\n        <div>\n        \n\n        {\n            menuItems.length ? \n            <>\n                <div className=\"welcome-banner\"><h3>Welcome to the Cloud Restaurant!</h3> <a href=\"javascript:void(0)\" onClick={logout}>Logout</a></div>\n                <br></br>\n                <Menu items={menuItems} role={role} addItem={addItem} editItem={editItem} deleteItem={deleteItem} />\n            </> : 'Loading...'\n        }\n\n        \n        </div>\n    );\n}\n \nexport default Home;"]},"metadata":{},"sourceType":"module"}